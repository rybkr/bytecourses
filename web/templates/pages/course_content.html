{{template "layout" .}} {{define "title"}}{{.Course.Title}} - Content - ByteCourses{{end}} {{define "content"}}
{{template "course-navbar" .}}

<div class="course-content-container">
    <div class="course-content-sidebar">
        <div class="course-content-sidebar-header">
            <h3>
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                Modules
            </h3>
        </div>
        <div class="course-content-modules">
            {{if .Modules}}
            {{range .Modules}}
            {{$readings := index $.ReadingsByModule .ID}}
            <div class="course-content-module{{if $.CurrentModule}}{{if eq .ID $.CurrentModule.ID}} active{{end}}{{end}}"
                data-module-id="{{.ID}}">
                <div class="course-content-module-header-wrapper">
                    <button type="button" class="course-content-module-header" aria-expanded="false">
                        <div class="module-card-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                            </svg>
                        </div>
                        <div class="module-card-content">
                            <span class="module-card-title">{{.Title}}</span>
                            <span class="module-card-count">{{if $readings}}{{len $readings}} item{{if gt (len
                                $readings) 1}}s{{end}}{{else}}Empty{{end}}</span>
                        </div>
                        <svg class="course-content-module-toggle" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <a href="/courses/{{$.Course.ID}}/modules/{{.ID}}" class="module-card-link" title="View module">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>
                </div>
                <div class="course-content-module-content">
                    {{if $readings}}
                    <div class="course-content-readings">
                        {{range $index, $reading := $readings}}
                        <a href="/courses/{{$.Course.ID}}/modules/{{$.ID}}/content/{{$reading.ID}}"
                            class="course-content-reading{{if $.CurrentReading}}{{if eq $reading.ID $.CurrentReading.ID}} active{{end}}{{end}}">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                            </svg>
                            <span>{{$reading.Title}}</span>
                        </a>
                        {{end}}
                    </div>
                    {{else}}
                    <div class="module-empty-state">
                        <p class="text-muted">No readings yet</p>
                        {{if $.IsInstructor}}
                        <a href="/courses/{{$.Course.ID}}/modules/{{.ID}}/content/new"
                            class="btn btn-small btn-outline">Add Reading</a>
                        {{end}}
                    </div>
                    {{end}}
                </div>
            </div>
            {{end}}
            {{else}}
            <div class="empty-state">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                {{if .IsInstructor}}
                <p>No modules yet</p>
                <span class="text-muted">Create your first module below</span>
                {{else}}
                <p>No content available</p>
                <span class="text-muted">Check back later</span>
                {{end}}
            </div>
            {{end}}
            {{if .IsInstructor}}
            <div class="add-module-section">
                <button type="button" class="add-module-trigger" id="add-module-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    <span>Add module</span>
                </button>
                <div class="add-module-form" id="new-module-form" style="display: none;">
                    <input type="text" class="inline-input" placeholder="Module title" required>
                    <textarea class="inline-textarea" placeholder="Description (optional)" rows="2"></textarea>
                    <div class="inline-actions">
                        <button type="button" class="btn btn-small btn-primary btn-create-module">Create</button>
                        <button type="button" class="btn btn-small btn-ghost btn-cancel-new-module">Cancel</button>
                    </div>
                </div>
            </div>
            {{end}}
        </div>
    </div>

    <div class="course-content-main">
        <div class="course-content-overview">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            <h1>Course Content</h1>
            <p class="text-muted">Select a module from the sidebar to view its content, or expand a module to see
                individual readings.</p>
        </div>
    </div>
</div>

{{end}} {{define "scripts"}}
<script type="module" src="/static/js/pages/course_content.js"></script>
{{end}}