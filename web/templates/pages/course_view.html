{{template "layout" .}} {{define "title"}}{{.Course.Title}} -
ByteCourses{{end}} {{define "content"}}
<div class="page-header">
    <a href="/courses" class="btn btn-outline">‚Üê Back to Courses</a>
    {{if .IsInstructor}}
    <button type="button" id="edit-toggle-btn" class="btn btn-primary">Edit</button>
    {{end}}
</div>

<div class="course-view-hero">
    <div class="course-view-hero-content">
        <div class="course-view-hero-main">
            <h1 id="view-title" class="view-mode">{{.Course.Title}}</h1>
            <input type="text" id="hero-title" name="title" class="edit-mode course-hero-title-input" style="display: none;" required value="{{.Course.Title}}" />
            <p id="view-summary" class="course-view-summary view-mode">{{.Course.Summary}}</p>
            <textarea id="hero-summary" name="summary" class="edit-mode course-hero-summary-textarea" style="display: none;" rows="3" required>{{.Course.Summary}}</textarea>
            <div class="course-view-instructor-inline">
                {{if .Instructor}}
                <div class="course-view-instructor-avatar">
                    {{if .Instructor.Name}}{{printf "%.1s" .Instructor.Name}}{{else}}{{printf "%.1s" .Instructor.Email}}{{end}}
                </div>
                <div class="course-view-instructor-details">
                    <span class="course-view-instructor-label">Instructor</span>
                    <span class="course-view-instructor-name">{{if .Instructor.Name}}{{.Instructor.Name}}{{else}}{{.Instructor.Email}}{{end}}</span>
                </div>
                {{end}}
            </div>
            <div class="course-view-meta">
                {{if .Course.Status}}
                <span class="course-view-badge {{if eq (printf "%s" .Course.Status) "published"}}course-view-badge-success{{else}}course-view-badge-default{{end}}">
                    {{if eq (printf "%s" .Course.Status) "published"}}Published{{else}}Draft{{end}}
                </span>
                {{end}}
            </div>
        </div>
    </div>
</div>

<form id="course-form" data-course-id="{{.Course.ID}}" data-autosave-delay="2000" class="edit-mode" style="display: none;">
    <div class="form-container">
        <div class="form-group">
            <label for="title">Title
                <span class="help-icon" data-help="title" aria-label="Show help for Title" tabindex="0" role="button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none" />
                        <path d="M8 11V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="8" cy="5.5" r="0.75" fill="currentColor" />
                    </svg>
                </span>
                <br /><small>Clear, specific, and focused on one topic.</small></label>
            <input type="text" id="title" name="title" required value="{{.Course.Title}}" />
        </div>

        <div class="form-group">
            <label for="summary">Summary
                <span class="help-icon" data-help="summary" aria-label="Show help for Summary" tabindex="0" role="button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none" />
                        <path d="M8 11V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="8" cy="5.5" r="0.75" fill="currentColor" />
                    </svg>
                </span>
                <br /><small>What learners will gain and why it matters.</small></label>
            <textarea id="summary" name="summary" rows="5" required>{{.Course.Summary}}</textarea>
        </div>

        <div class="form-group">
            <label for="target_audience">Target Audience
                <span class="help-icon" data-help="target_audience" aria-label="Show help for Target Audience" tabindex="0" role="button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none" />
                        <path d="M8 11V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="8" cy="5.5" r="0.75" fill="currentColor" />
                    </svg>
                </span>
                <br /><small>Who this course is for.</small></label>
            <textarea id="target_audience" name="target_audience" rows="3">{{.Course.TargetAudience}}</textarea>
        </div>

        <div class="form-group">
            <label for="learning_objectives">Learning Objectives
                <span class="help-icon" data-help="learning_objectives" aria-label="Show help for Learning Objectives" tabindex="0" role="button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none" />
                        <path d="M8 11V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="8" cy="5.5" r="0.75" fill="currentColor" />
                    </svg>
                </span>
                <br /><small>What learners will be able to do after completing this course.</small></label>
            <textarea id="learning_objectives" name="learning_objectives" rows="5">{{.Course.LearningObjectives}}</textarea>
        </div>

        <div class="form-group">
            <label for="assumed_prerequisites">Assumed Prerequisites
                <span class="help-icon" data-help="assumed_prerequisites" aria-label="Show help for Assumed Prerequisites" tabindex="0" role="button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" fill="none" />
                        <path d="M8 11V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <circle cx="8" cy="5.5" r="0.75" fill="currentColor" />
                    </svg>
                </span>
                <br /><small>What learners should know before starting this course.</small></label>
            <textarea id="assumed_prerequisites" name="assumed_prerequisites" rows="3">{{.Course.AssumedPrerequisites}}</textarea>
        </div>

        <div id="error-message" class="error-message" style="display: none"></div>
        <div id="save-status" style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 8px"></div>

        <div class="form-actions">
            <button type="button" id="saveBtn" class="btn btn-secondary">Save</button>
        </div>
    </div>
</form>

<div class="course-view-content">
    <div class="course-view-main view-mode">
        {{if .Course.LearningObjectives}}
        <section class="course-view-section course-view-objectives">
            <div class="course-view-section-header">
                <div class="course-view-section-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <h2>What You'll Learn</h2>
            </div>
            <div class="course-view-section-body">
                {{markdown .Course.LearningObjectives}}
            </div>
        </section>
        {{end}}

        {{if .Course.TargetAudience}}
        <section class="course-view-section course-view-audience">
            <div class="course-view-section-header">
                <div class="course-view-section-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <h2>Who This Course Is For</h2>
            </div>
            <div class="course-view-section-body">
                {{markdown .Course.TargetAudience}}
            </div>
        </section>
        {{end}}

        {{if .Course.AssumedPrerequisites}}
        <section class="course-view-section course-view-prerequisites">
            <div class="course-view-section-header">
                <div class="course-view-section-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                        <polyline points="2 17 12 22 22 17"></polyline>
                        <polyline points="2 12 12 17 22 12"></polyline>
                    </svg>
                </div>
                <h2>Prerequisites</h2>
            </div>
            <div class="course-view-section-body">
                {{markdown .Course.AssumedPrerequisites}}
            </div>
        </section>
        {{end}}

        <section class="course-view-section course-view-about">
            <div class="course-view-section-header">
                <div class="course-view-section-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                </div>
                <h2>About This Course</h2>
            </div>
            <div class="course-view-section-body">
                {{markdown .Course.Summary}}
            </div>
        </section>
    </div>

    <div class="course-view-sidebar">
        {{if .Instructor}}
        <div class="course-view-instructor-card">
            <h3>Your Instructor</h3>
            <div class="course-view-instructor-profile">
                <div class="course-view-instructor-avatar-large">
                    {{if .Instructor.Name}}{{printf "%.1s" .Instructor.Name}}{{else}}{{printf "%.1s" .Instructor.Email}}{{end}}
                </div>
                <div class="course-view-instructor-info">
                    <p class="course-view-instructor-name-large">{{if .Instructor.Name}}{{.Instructor.Name}}{{else}}{{.Instructor.Email}}{{end}}</p>
                </div>
            </div>
        </div>
        {{end}}

        <div class="course-view-details-card">
            <h3>Course Details</h3>
            <div class="course-view-detail-row">
                <span class="course-view-detail-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </span>
                <span class="course-view-detail-label">Status</span>
                <span class="course-view-detail-value">{{if eq (printf "%s" .Course.Status) "published"}}Published{{else}}Draft{{end}}</span>
            </div>
            <div class="course-view-detail-row">
                <span class="course-view-detail-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                </span>
                <span class="course-view-detail-label">Created</span>
                <span class="course-view-detail-value">{{.Course.CreatedAt.Format "Jan 2, 2006"}}</span>
            </div>
            {{if and .IsInstructor (eq .Course.Status "draft")}}
            <div style="margin-top: 1.5rem;">
                <button type="button" id="publishBtn" class="btn btn-primary" style="width: 100%;">
                    Publish Course
                </button>
            </div>
            {{end}}
        </div>
    </div>
</div>
{{end}} {{define "scripts"}}
<script type="module" src="/static/js/pages/course_view.js"></script>
{{end}}
