{{template "layout" .}} {{define "title"}}{{.Reading.Title}} - {{.Course.Title}} - ByteCourses{{end}} {{define
"content"}}
{{template "course-navbar" .}}

<div class="lecture-view-container">
    <div class="lecture-view-header">
        <div class="lecture-view-breadcrumb">
            <a href="/courses/{{.Course.ID}}/modules">{{.Course.Title}}</a>
            <span> / </span>
            <a href="/courses/{{.Course.ID}}/modules/{{.Module.ID}}">{{.Module.Title}}</a>
            <span> / </span>
            <span>{{.Reading.Title}}</span>
        </div>
        <h1 class="lecture-view-title">{{.Reading.Title}}</h1>
        <div class="lecture-view-meta">
            {{if .IsInstructor}}
            <span class="content-status-badge content-status-{{.Reading.Status}}">{{.Reading.Status}}</span>
            {{if eq .Reading.Status "draft"}}
            <button type="button" id="publish-btn" class="btn btn-small btn-success">Publish</button>
            {{else}}
            <button type="button" id="unpublish-btn" class="btn btn-small btn-secondary">Unpublish</button>
            {{end}}
            <a href="/courses/{{.Course.ID}}/modules/{{.Module.ID}}/content/{{.Reading.ID}}/edit"
                class="btn btn-small btn-secondary">Edit</a>
            {{end}}
        </div>
    </div>

    <div class="lecture-view-content">
        {{if .Reading.Content}}
        <div class="proposal-content-value">{{markdown .Reading.Content}}</div>
        {{else}}
        <p class="text-muted">No content available yet.</p>
        {{end}}
    </div>

    <div class="lecture-navigation">
        <a href="/courses/{{.Course.ID}}/modules/{{.Module.ID}}" class="btn btn-outline">‚Üê Back to Module</a>
        <a href="/courses/{{.Course.ID}}/modules" class="btn btn-outline">Back to Content</a>
        {{if .IsInstructor}}
        <a href="/courses/{{.Course.ID}}/edit" class="btn btn-secondary">Edit Course</a>
        {{end}}
    </div>
</div>

<script>
    window.LECTURE_VIEW_DATA = {
        courseId: {{.Course.ID}},
        moduleId: {{.Module.ID}},
        readingId: {{.Reading.ID}}
    };
</script>
{{end}}

{{define "scripts"}}
<script type="module" src="/static/js/pages/lecture_view.js"></script>
{{end}}